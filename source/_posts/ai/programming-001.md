---
title: ç¬¬ä¸€ç«  è®¡ç®—æœºç¼–ç¨‹æ¦‚è¿°
date: 2025-05-18 14:45:37
tags:
  - æ¦‚è¿°
  - åŸºç¡€
categories:
  - è®¡ç®—æœº
  - ç¼–ç¨‹
mathjax: "true"
cover: cover.jpg
---
# ç¬¬ä¸€ç«  è®¡ç®—æœºç¼–ç¨‹æ¦‚è¿°

## 1.2 ç¼–è¯‘å’Œæ‰§è¡Œè¿‡ç¨‹

ä¼ ç»Ÿä¸Šï¼Œä¸€ä¸ªè¯­è¨€ï¼ˆä»¥ c è¯­è¨€ä¸ºä¾‹ï¼‰ä»ç¼–å†™äººç±»å¯è¯†åˆ«çš„è¯­è¨€åˆ°æœºå™¨å¯è¯†åˆ«çš„è¯­è¨€è¦ç»è¿‡å¦‚ä¸‹çš„æ­¥éª¤ã€‚

![ä¼ ç»Ÿç¼–è¯‘è¿‡ç¨‹](20250505144822.png)

åœ¨è¿‡ç¨‹ä¸­ç”±ä¸‰ä¸ªç‰¹åˆ«é‡è¦çš„æ–‡ä»¶ï¼š

1. æºæ–‡ä»¶ï¼šäººç±»å¯è¯†åˆ«çš„è¯­è¨€ï¼Œæ¯”å¦‚ c, python, java ç­‰ï¼Œéœ€è¦éµå¾ªä¸€å®šçš„è¯­æ³•è§„åˆ™ï¼›
2. æ±‡ç¼–è¯­è¨€ï¼šæ±‡ç¼–è¯­è¨€æ˜¯ä¸€ç§**ä½çº§**ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒä¸ç‰¹å®šçš„è®¡ç®—æœºä½“ç³»ç»“æ„ï¼ˆå³ CPU ç±»å‹ï¼Œå¦‚ x86, ARM, MIPS ç­‰ï¼‰æœ‰ç€**éå¸¸ç›´æ¥çš„å¯¹åº”å…³ç³»**ã€‚å¯ä»¥è®¤ä¸ºå®ƒæ˜¯æœºå™¨ç ï¼ˆè®¡ç®—æœºèƒ½ç›´æ¥æ‰§è¡Œçš„äºŒè¿›åˆ¶æŒ‡ä»¤ï¼‰çš„**ç¬¦å·åŒ–è¡¨ç¤º**ã€‚æ±‡ç¼–è¯­è¨€æ˜¯ä»‹äºæœºå™¨ç å’Œé«˜çº§è¯­è¨€ï¼ˆå¦‚ C, Python, Java ç­‰ï¼‰ä¹‹é—´çš„ä¸€ç§è¯­è¨€ã€‚å®ƒæ¯”æœºå™¨ç æ›´å®¹æ˜“é˜…è¯»å’Œç¼–å†™ï¼Œä½†æ¯”é«˜çº§è¯­è¨€æ›´æ¥è¿‘ç¡¬ä»¶ï¼ŒæŠ½è±¡ç¨‹åº¦æ›´ä½ï¼›
3. æœºå™¨ç ï¼šæœºå™¨ç æ˜¯è®¡ç®—æœºèƒ½ç›´æ¥ç†è§£å’Œæ‰§è¡Œçš„**æœ€ä½çº§**çš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒå®Œå…¨ç”±**äºŒè¿›åˆ¶ä»£ç **ï¼ˆ0 å’Œ 1 çš„åºåˆ—ï¼‰ç»„æˆã€‚æ¯ä¸€ä¸²ç‰¹å®šçš„äºŒè¿›åˆ¶ä»£ç éƒ½å¯¹åº”ç€ CPU æ‰§è¡Œçš„ä¸€ä¸ªåŸºæœ¬æ“ä½œï¼Œä¾‹å¦‚åŠ è½½æ•°æ®ã€è¿›è¡Œç®—æœ¯è¿ç®—ã€æ¯”è¾ƒå€¼æˆ–è·³è½¬åˆ°å¦ä¸€ä¸ªæŒ‡ä»¤åœ°å€ã€‚æœºå™¨ç æ˜¯ CPU èƒ½ç›´æ¥ç†è§£çš„äºŒè¿›åˆ¶æŒ‡ä»¤ï¼Œæ˜¯ç¨‹åºçš„æœ€ä½å±‚è¡¨ç¤ºï¼›

### ç¤ºä¾‹

1. äººç±»è¯†åˆ«çš„é«˜çº§è¯­è¨€
``` c
// add.c
#include <stdio.h> // è™½ç„¶ä¸»å‡½æ•°ç®€å•åŒ–äº†ï¼Œä½†ä¿ç•™includeæ˜¯å¸¸è§åšæ³•

int add_numbers(int a, int b) {
    int c = a + b;
    return c;
}

int main() {
    int x = 5;
    int y = 3;
    int sum = add_numbers(x, y); // è°ƒç”¨åŠ æ³•å‡½æ•°
    // åœ¨å®é™…ç¨‹åºä¸­å¯èƒ½ä¼šæ‰“å°ç»“æœï¼Œä½†è¿™é‡Œä¸ºç®€åŒ–æ±‡ç¼–å’Œæœºå™¨ç ï¼Œç›´æ¥è¿”å›ç»“æœ
    return sum; // è¿”å›è®¡ç®—ç»“æœ
}
```

2. ç»è¿‡ç¼–è¯‘å™¨å¤„ç†åçš„æ±‡æŠ¥è¯­è¨€
``` asm
.file   "add.c"
        .text
        .globl  add_numbers             ; å£°æ˜ add_numbers å‡½æ•°æ˜¯å…¨å±€çš„
        .type   add_numbers, @function
add_numbers:                            ; add_numbers å‡½æ•°çš„å¼€å§‹
.LFB0:
        .cfi_startproc                  ; CFI (Call Frame Information) å¼€å§‹
        pushq   %rbp                    ; ä¿å­˜æ ˆåŸºå€å¯„å­˜å™¨
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        movq    %rsp, %rbp              ; è®¾ç½®æ–°çš„æ ˆåŸºå€
        .cfi_def_cfa_register 6
        movl    %edi, -4(%rbp)          ; å°†ç¬¬ä¸€ä¸ªå‚æ•° a (åœ¨å¯„å­˜å™¨ edi ä¸­) å­˜å‚¨åˆ°æ ˆä¸Šçš„å˜é‡ç©ºé—´
        movl    %esi, -8(%rbp)          ; å°†ç¬¬äºŒä¸ªå‚æ•° b (åœ¨å¯„å­˜å™¨ esi ä¸­) å­˜å‚¨åˆ°æ ˆä¸Šçš„å˜é‡ç©ºé—´
        movl    -4(%rbp), %edx          ; å°†æ ˆä¸Šçš„ a çš„å€¼åŠ è½½åˆ°å¯„å­˜å™¨ edx
        movl    -8(%rbp), %eax          ; å°†æ ˆä¸Šçš„ b çš„å€¼åŠ è½½åˆ°å¯„å­˜å™¨ eax
        addl    %edx, %eax              ; æ‰§è¡ŒåŠ æ³•ï¼šeax = eax + edx (å³ eax = b + a)
        movl    %eax, -12(%rbp)         ; å°†ç»“æœ (åœ¨ eax ä¸­) å­˜å‚¨åˆ°æ ˆä¸Šçš„å˜é‡ c ç©ºé—´
        movl    -12(%rbp), %eax         ; å°†æ ˆä¸Šçš„ c çš„å€¼åŠ è½½åˆ° eax (å‡½æ•°è¿”å›å€¼é€šå¸¸æ”¾åœ¨ eax/rax)
        popq    %rbp                    ; æ¢å¤æ ˆåŸºå€å¯„å­˜å™¨
        .cfi_def_cfa 7, 8
        ret                             ; å‡½æ•°è¿”å›
        .cfi_endproc                    ; CFI ç»“æŸ
.LFE0:
        .size   add_numbers, .-add_numbers
        .globl  main                    ; å£°æ˜ main å‡½æ•°æ˜¯å…¨å±€çš„
        .type   main, @function
main:                                   ; main å‡½æ•°çš„å¼€å§‹
.LFB1:
        .cfi_startproc                  ; CFI å¼€å§‹
        pushq   %rbp                    ; ä¿å­˜æ ˆåŸºå€å¯„å­˜å™¨
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        movq    %rsp, %rbp              ; è®¾ç½®æ–°çš„æ ˆåŸºå€
        .cfi_def_cfa_register 6
        subq    $16, %rsp               ; åœ¨æ ˆä¸Šåˆ†é…ä¸€äº›ç©ºé—´ç»™å±€éƒ¨å˜é‡ (x, y, sum)
        movl    $5, -4(%rbp)            ; å°†æ•´æ•° 5 å­˜å‚¨åˆ°æ ˆä¸Šçš„ x å˜é‡ç©ºé—´
        movl    $3, -8(%rbp)            ; å°†æ•´æ•° 3 å­˜å‚¨åˆ°æ ˆä¸Šçš„ y å˜é‡ç©ºé—´
        movl    -4(%rbp), %edx          ; å°†æ ˆä¸Šçš„ x çš„å€¼åŠ è½½åˆ° edx
        movl    -8(%rbp), %eax          ; å°†æ ˆä¸Šçš„ y çš„å€¼åŠ è½½åˆ° eax
        movl    %edx, %edi              ; å°† x (åœ¨ edx ä¸­) ç§»åŠ¨åˆ° edi å¯„å­˜å™¨ (ç”¨äºä¼ é€’ç¬¬ä¸€ä¸ªå‚æ•°)
        movl    %eax, %esi              ; å°† y (åœ¨ eax ä¸­) ç§»åŠ¨åˆ° esi å¯„å­˜å™¨ (ç”¨äºä¼ é€’ç¬¬äºŒä¸ªå‚æ•°)
        call    add_numbers             ; è°ƒç”¨ add_numbers å‡½æ•°
        movl    %eax, -12(%rbp)         ; å°† add_numbers çš„è¿”å›å€¼ (åœ¨ eax ä¸­) å­˜å‚¨åˆ°æ ˆä¸Šçš„ sum å˜é‡ç©ºé—´
        movl    -12(%rbp), %eax         ; å°†æ ˆä¸Šçš„ sum çš„å€¼åŠ è½½åˆ° eax (main å‡½æ•°çš„è¿”å›å€¼)
        leave                           ; ç›¸å½“äº movq %rbp, %rsp; popq %rbp
        .cfi_def_cfa 7, 8
        ret                             ; main å‡½æ•°è¿”å›
        .cfi_endproc                    ; CFI ç»“æŸ
.LFE1:
        .size   main, .-main
        .ident  "GCC: (GNU) 11.2.0" ; æ ‡è¯†ä½¿ç”¨äº†å“ªä¸ªç¼–è¯‘å™¨å’Œç‰ˆæœ¬
        .section        .note.GNU-stack,"",@progbits ; GNU æ ˆæ ‡è®°
```

3. è®¡ç®—æœºå®é™…çœ‹åˆ°çš„æœºå™¨è¯­è¨€
``` asm
add.o: file format elf64-x86-64

Disassembly of section .text: 

0000000000000000 <add_numbers>:
0: 55 push                  %rbp
1: 48 89 e5                 mov %rsp,%rbp
4: 89 7d fc                 mov %edi,-0x4(%rbp)
7: 89 75 f8                 mov %esi,-0x8(%rbp)
a: 8b 55 fc                 mov -0x4(%rbp),%edx
d: 8b 45 f8                 mov -0x8(%rbp),%eax
10: 01 d0                   add %edx,%eax
12: 89 45 ec                mov %eax,-0x14(%rbp)
15: 8b 45 ec                mov -0x14(%rbp),%eax
18: 5d                      pop %rbp
19: c3                      ret

000000000000001a <main>:
1a: 55                      push %rbp
1b: 48 89 e5                mov %rsp,%rbp
1e: 48 83 ec 10             sub $0x10,%rsp
22: c7 45 fc 05 00 00 00    movl $0x5,-0x4(%rbp)
29: c7 45 f8 03 00 00 00    movl $0x3,-0x8(%rbp)
30: 8b 55 fc                mov -0x4(%rbp),%edx
33: 8b 45 f8                mov -0x8(%rbp),%eax
36: 89 d7                   mov %edx,%edi
38: 89 c6                   mov %eax,%esi
3a: e8 c1 ff ff ff          call 1a <main+0> ; call add_numbers - link time resolved address
3f: 89 45 f4                mov %eax,-0xc(%rbp)
42: 8b 45 f4                mov -0xc(%rbp),%eax
45: c9                      leave
46: c3                      ret
```

ğŸ‘‰ åˆå¹¶è¡¨ç¤ºä¸ºä¸€æ®µæœºå™¨ç ï¼ˆhexï¼‰ï¼š

``` asm
55 48 89 E5 89 7D FC 89 75 F8 8B 55 FC 8B 45 F8  
01 D0 89 45 EC 8B 45 EC 5D C3 55 48 89 E5 48 83  
EC 10 C7 45 FC 05 00 00 00 C7 45 F8 03 00 00 00  
8B 55 FC 8B 45 F8 89 D7 89 C6 E8 C1 FF FF FF 89  
45 F4 8B 45 F4 C9 C3
```

## 1.3 è®¡ç®—æœºä¸­é€»è¾‘è¿ç®—å…³ç³»

### 1.3.1 å¸ƒå°”å€¼

åœ¨è®¡ç®—æœºä¸­ï¼Œ**å¸ƒå°”å€¼ï¼ˆBoolean valuesï¼‰** æ˜¯æœ€åŸºç¡€çš„æ•°æ®ç±»å‹ä¹‹ä¸€ï¼Œè¡¨ç¤ºé€»è¾‘ä¸Šçš„â€œçœŸâ€ä¸â€œå‡â€ã€‚å‡ ä¹æ‰€æœ‰ç¨‹åºçš„æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ã€æ§åˆ¶ç»“æ„ã€ä½æ“ä½œéƒ½ç¦»ä¸å¼€å®ƒã€‚

#### ä¸€ã€å¸ƒå°”å€¼çš„åŸºæœ¬å®šä¹‰

|åç§°|è‹±æ–‡å|å€¼|å«ä¹‰|
|---|---|---|---|
|çœŸ|`True`|é€šå¸¸ç­‰äº `1`|æ¡ä»¶æˆç«‹|
|å‡|`False`|é€šå¸¸ç­‰äº `0`|æ¡ä»¶ä¸æˆç«‹|

åœ¨å†…å­˜ä¸­ï¼Œè¿™ä¸¤ä¸ªå€¼åˆ†åˆ«è¢«è¡¨ç¤ºä¸ºï¼š

- `True â†’ 1ï¼ˆéé›¶ï¼‰` 
- `False â†’ 0`

#### äºŒã€å¸ƒå°”å€¼çš„æ¥æº

å¸ƒå°”å€¼çš„æ¦‚å¿µæ¥æºäº**å¸ƒå°”ä»£æ•°ï¼ˆBoolean Algebraï¼‰**ï¼Œç”±æ•°å­¦å®¶ George Boole æå‡ºï¼Œç”¨äºå¤„ç†â€œé€»è¾‘çœŸå‡â€è€Œéæ•°å€¼å¤§å°ã€‚

### 1.3.2 ä¸»è¦é€»è¾‘è¿ç®—å¯¹æ¯”è¡¨ï¼ˆPython vs æ•°å­¦ï¼‰

| é€»è¾‘å…³ç³»     | æ•°å­¦ç¬¦å·                | Pythonç¬¦å·/å…³é”®å­—    | ä¸­æ–‡å«ä¹‰      | ç¤ºä¾‹ï¼ˆA=True, B=Falseï¼‰   | ç»“æœ      |
| -------- | ------------------- | --------------- | --------- | --------------------- | ------- |
| ä¸ï¼ˆANDï¼‰   | $A \land B$         | `A and B`       | ä¸¤è€…éƒ½ä¸ºçœŸæ—¶ä¸ºçœŸ  | `True and False`      | `False` |
| æˆ–ï¼ˆORï¼‰    | $A \lor B$          | `A or B`        | è‡³å°‘ä¸€ä¸ªä¸ºçœŸæ—¶ä¸ºçœŸ | `True or False`       | `True`  |
| éï¼ˆNOTï¼‰   | $\lnot A$           | `not A`         | å¯¹å€¼å–å      | `not True`            | `False` |
| å¼‚æˆ–ï¼ˆXORï¼‰  | $A \oplus B$        | `A ^ B`ï¼ˆä½è¿ç®—ï¼‰    | ä¸€çœŸä¸€å‡ä¸ºçœŸ    | `True ^ False`        | `True`  |
| åŒæˆ–ï¼ˆXNORï¼‰ | â€”                   | `not (A ^ B)`   | ç›¸åŒä¸ºçœŸ      | `not (True ^ True)`   | `True`  |
| ä¸éï¼ˆNANDï¼‰ | $\lnot (A \land B)$ | `not (A and B)` | éå…¨çœŸä¸ºçœŸ     | `not (True and True)` | `False` |
| æˆ–éï¼ˆNORï¼‰  | $\lnot (A \lor B)$  | `not (A or B)`  | å…¨å‡ä¸ºçœŸ      | `not (True or False)` | `False` |